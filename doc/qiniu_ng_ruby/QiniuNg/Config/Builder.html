<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: QiniuNg::Config::Builder
  
    &mdash; Documentation by YARD 0.9.24
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "QiniuNg::Config::Builder";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span>
     &raquo; 
    <span class="title">Builder</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: QiniuNg::Config::Builder
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">QiniuNg::Config::Builder</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/qiniu_ng/config.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>七牛客户端配置生成器</p>

<p>通过多次调用方法修改配置数据，将具有比 <span class='object_link'><a href="../Config.html#initialize-instance_method" title="QiniuNg::Config#initialize (method)">#initialize</a></span> 更强大的功能</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span><span class='op'>::</span><span class='const'>Builder</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="QiniuNg::Config::Builder#initialize (method)">new</a></span></span><span class='period'>.</span><span class='id identifier rubyid_use_https'><span class='object_link'><a href="#use_https-instance_method" title="QiniuNg::Config::Builder#use_https (method)">use_https</a></span></span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_build!'><span class='object_link'><a href="#build!-instance_method" title="QiniuNg::Config::Builder#build! (method)">build!</a></span></span></code></pre>
    
  </div>


</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#api_host-instance_method" title="#api_host (instance method)">#<strong>api_host</strong>(api_host)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 API 服务器地址.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#append_http_request_after_action_handler-instance_method" title="#append_http_request_after_action_handler (instance method)">#<strong>append_http_request_after_action_handler</strong> {|request, response| ... } &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>追加 HTTP 请求响应后回调函数.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#append_http_request_before_action_handler-instance_method" title="#append_http_request_before_action_handler (instance method)">#<strong>append_http_request_before_action_handler</strong> {|request| ... } &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>追加 HTTP 请求前回调函数.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#batch_max_operation_size-instance_method" title="#batch_max_operation_size (instance method)">#<strong>batch_max_operation_size</strong>(size)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置最大批量操作数.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build!-instance_method" title="#build! (instance method)">#<strong>build!</strong>  &#x21d2; Config </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>生成客户端配置.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_new_domains_manager-instance_method" title="#create_new_domains_manager (instance method)">#<strong>create_new_domains_manager</strong>(persistent_file = nil)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>创建一个新的域名管理器.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#disable_uplog-instance_method" title="#disable_uplog (instance method)">#<strong>disable_uplog</strong>  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>禁用上传日志记录仪，默认为启用.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#domains_manager_auto_persistent_interval-instance_method" title="#domains_manager_auto_persistent_interval (instance method)">#<strong>domains_manager_auto_persistent_interval</strong>(interval)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置域名管理器的自动持久化间隔时间.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#domains_manager_disable_auto_persistent-instance_method" title="#domains_manager_disable_auto_persistent (instance method)">#<strong>domains_manager_disable_auto_persistent</strong>  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>禁止域名管理器自动持久化，默认为启用.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#domains_manager_disable_url_resolution-instance_method" title="#domains_manager_disable_url_resolution (instance method)">#<strong>domains_manager_disable_url_resolution</strong>  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>禁止域名管理器 URL 域名预解析，默认为启用.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#domains_manager_enable_url_resolution-instance_method" title="#domains_manager_enable_url_resolution (instance method)">#<strong>domains_manager_enable_url_resolution</strong>  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>启用域名管理器 URL 域名预解析，默认为启用.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#domains_manager_persistent_file_path-instance_method" title="#domains_manager_persistent_file_path (instance method)">#<strong>domains_manager_persistent_file_path</strong>(persistent_file_path)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置域名管理器的持久化路径.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#domains_manager_pre_resolve_url-instance_method" title="#domains_manager_pre_resolve_url (instance method)">#<strong>domains_manager_pre_resolve_url</strong>(pre_resolve_url)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>添加域名预解析 URL.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#domains_manager_resolutions_cache_lifetime-instance_method" title="#domains_manager_resolutions_cache_lifetime (instance method)">#<strong>domains_manager_resolutions_cache_lifetime</strong>(lifetime)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置域名管理器的域名解析缓存生命周期.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#domains_manager_url_frozen_duration-instance_method" title="#domains_manager_url_frozen_duration (instance method)">#<strong>domains_manager_url_frozen_duration</strong>(url_frozen_duration)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置域名管理器的 URL 冻结时长.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#domains_manager_url_resolve_retries-instance_method" title="#domains_manager_url_resolve_retries (instance method)">#<strong>domains_manager_url_resolve_retries</strong>(retries)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置域名管理器的 URL 域名预解析重试次数.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#domains_manager_url_resolve_retry_delay-instance_method" title="#domains_manager_url_resolve_retry_delay (instance method)">#<strong>domains_manager_url_resolve_retry_delay</strong>(delay)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置域名管理器的 URL 域名预解析重试前等待时间.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#enable_uplog-instance_method" title="#enable_uplog (instance method)">#<strong>enable_uplog</strong>  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>启用上传日志记录仪，默认为启用.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#http_connect_timeout-instance_method" title="#http_connect_timeout (instance method)">#<strong>http_connect_timeout</strong>(timeout)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 HTTP 请求连接超时时长.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#http_low_transfer_speed-instance_method" title="#http_low_transfer_speed (instance method)">#<strong>http_low_transfer_speed</strong>(speed)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 HTTP 最低传输速度.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#http_low_transfer_speed_timeout-instance_method" title="#http_low_transfer_speed_timeout (instance method)">#<strong>http_low_transfer_speed_timeout</strong>(timeout)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 HTTP 最低传输速度维持时长.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#http_request_handler-instance_method" title="#http_request_handler (instance method)">#<strong>http_request_handler</strong> {|request, response| ... } &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 HTTP 请求处理函数.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#http_request_retries-instance_method" title="#http_request_retries (instance method)">#<strong>http_request_retries</strong>(retries)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 HTTP 请求重试次数.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#http_request_retry_delay-instance_method" title="#http_request_retry_delay (instance method)">#<strong>http_request_retry_delay</strong>(delay)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 HTTP 请求重试前等待时间.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#http_request_timeout-instance_method" title="#http_request_timeout (instance method)">#<strong>http_request_timeout</strong>(timeout)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 HTTP 请求超时时长.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  &#x21d2; Builder </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>创建默认的七牛客户端配置生成器.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_domains_manager_from_file-instance_method" title="#load_domains_manager_from_file (instance method)">#<strong>load_domains_manager_from_file</strong>(persistent_file)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>从指定路径加载域名管理器.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prepend_http_request_after_action_handler-instance_method" title="#prepend_http_request_after_action_handler (instance method)">#<strong>prepend_http_request_after_action_handler</strong> {|request, response| ... } &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>新增 HTTP 请求响应后回调函数.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prepend_http_request_before_action_handler-instance_method" title="#prepend_http_request_before_action_handler (instance method)">#<strong>prepend_http_request_before_action_handler</strong> {|request| ... } &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>新增 HTTP 请求前回调函数.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rs_host-instance_method" title="#rs_host (instance method)">#<strong>rs_host</strong>(rs_host)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 RS 服务器地址.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rsf_host-instance_method" title="#rsf_host (instance method)">#<strong>rsf_host</strong>(rsf_host)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 RSF 服务器地址.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_appended_user_agent-instance_method" title="#set_appended_user_agent (instance method)">#<strong>set_appended_user_agent</strong>(user_agent)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置追加用户代理.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tcp_keepalive_idle_timeout-instance_method" title="#tcp_keepalive_idle_timeout (instance method)">#<strong>tcp_keepalive_idle_timeout</strong>(timeout)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 TCP KeepAlive 空闲时长.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tcp_keepalive_probe_interval-instance_method" title="#tcp_keepalive_probe_interval (instance method)">#<strong>tcp_keepalive_probe_interval</strong>(interval)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 TCP KeepAlive 探测包的发送间隔.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uc_host-instance_method" title="#uc_host (instance method)">#<strong>uc_host</strong>(uc_host)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 UC 服务器地址.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload_block_size-instance_method" title="#upload_block_size (instance method)">#<strong>upload_block_size</strong>(size)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置上传分块尺寸.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload_recorder_always_flush_records-instance_method" title="#upload_recorder_always_flush_records (instance method)">#<strong>upload_recorder_always_flush_records</strong>(always_flush_records)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置进度记录文件始终刷新.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload_recorder_root_directory-instance_method" title="#upload_recorder_root_directory (instance method)">#<strong>upload_recorder_root_directory</strong>(root_directory)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置上传进度记录仪文件根目录.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload_recorder_upload_block_lifetime-instance_method" title="#upload_recorder_upload_block_lifetime (instance method)">#<strong>upload_recorder_upload_block_lifetime</strong>(lifetime)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置文件分块有效期.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload_threshold-instance_method" title="#upload_threshold (instance method)">#<strong>upload_threshold</strong>(threshold)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置分片上传策略阙值.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload_token_lifetime-instance_method" title="#upload_token_lifetime (instance method)">#<strong>upload_token_lifetime</strong>(lifetime)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置上传凭证有效期.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uplog_file_lock_policy-instance_method" title="#uplog_file_lock_policy (instance method)">#<strong>uplog_file_lock_policy</strong>(lock_policy)  &#x21d2; Builder </a>
    

    
      (also: #uplog_file_lock_policy=)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置文件锁策略.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uplog_file_max_size-instance_method" title="#uplog_file_max_size (instance method)">#<strong>uplog_file_max_size</strong>(max_size)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置上传日志文件的最大尺寸.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uplog_file_path-instance_method" title="#uplog_file_path (instance method)">#<strong>uplog_file_path</strong>(path)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置上传日志文件路径.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uplog_file_upload_threshold-instance_method" title="#uplog_file_upload_threshold (instance method)">#<strong>uplog_file_upload_threshold</strong>(threshold)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置上传日志文件的上传阙值.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uplog_host-instance_method" title="#uplog_host (instance method)">#<strong>uplog_host</strong>(uplog_host)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>设置 UpLog 服务器地址.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#use_https-instance_method" title="#use_https (instance method)">#<strong>use_https</strong>(use_https)  &#x21d2; Builder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>是否使用 HTTPS 协议.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>创建默认的七牛客户端配置生成器</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


338
339
340</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 338</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='ivar'>@builder</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:new_default</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="api_host-instance_method">
  
    #<strong>api_host</strong>(api_host)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 API 服务器地址</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>api_host</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>API 服务器地址（仅需要指定主机地址和端口，无需包含协议）</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 669</span>

<span class='qsymbols_beg'>%i[</span><span class='tstring_content'>api_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rs_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rsf_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uc_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_host</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_persistent_file_path</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_pre_resolve_url</span><span class='words_sep'>
   </span><span class='tstring_content'>upload_recorder_root_directory</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_file_path</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error.html" title="QiniuNg::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_ffi_function'>wrap_ffi_function</span> <span class='kw'>do</span>
      <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="append_http_request_after_action_handler-instance_method">
  
    #<strong>append_http_request_after_action_handler</strong> {|request, response| ... } &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>追加 HTTP 请求响应后回调函数</p>

<p>您可以利用该特性输出 HTTP 日志或对 HTTP 响应内容进行修改。 但注意，您必须确保不破坏响应中必要的内容，否则 SDK 可能无法处理该响应。</p>

<p>如果在回调中发生错误，您可以抛出对应的异常。但只有以下几种异常会被 SDK 处理:</p>
<ul><li>
<p><code>Error::IOHandlerError</code> - IO 异常</p>
</li><li>
<p><code>Error::OSHandlerError</code> - 系统调用异常</p>
</li><li>
<p><code>Error::UnexpectedRedirectHandlerError</code> - 非预期的重定向错误</p>
</li><li>
<p><code>Error::UserCancelledHandlerError</code> - 用户取消异常</p>
</li><li>
<p><code>Error::JSONHandlerError</code> - JSON 错误</p>
</li><li>
<p><code>Error::ResponseStatusCodeHandlerError</code> - 响应状态码错误</p>
</li><li>
<p><code>Error::CurlHandlerError</code> - Curl 错误</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>request</tt>, <tt>response</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>回调函数</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>request</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/Request.html" title="QiniuNg::HTTP::Request (class)">HTTP::Request</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HTTP 请求</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>response</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/Response.html" title="QiniuNg::HTTP::Response (class)">HTTP::Response</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HTTP 响应</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


491
492
493
494
495</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 491</span>

<span class='kw'>def</span> <span class='id identifier rubyid_append_http_request_after_action_handler'>append_http_request_after_action_handler</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_handler'>handler</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_idx'>idx</span> <span class='op'>=</span> <span class='const'>CallbackData</span><span class='period'>.</span><span class='id identifier rubyid_put'>put</span><span class='lparen'>(</span><span class='id identifier rubyid_handler'>handler</span><span class='rparen'>)</span>
  <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_append_http_request_after_action_handler'>append_http_request_after_action_handler</span><span class='lparen'>(</span><span class='const'>HTTPRequestAfterActionHandler</span><span class='comma'>,</span> <span class='id identifier rubyid_idx'>idx</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="append_http_request_before_action_handler-instance_method">
  
    #<strong>append_http_request_before_action_handler</strong> {|request| ... } &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>追加 HTTP 请求前回调函数</p>

<p>您可以利用该特性输出 HTTP 日志或对 HTTP 请求内容进行修改。 但注意，您必须确保不破坏请求中必要的内容，否则七牛服务器可能无法处理该请求。</p>

<p>如果在回调中发生错误，您可以抛出对应的异常。但只有以下几种异常会被 SDK 处理:</p>
<ul><li>
<p><code>Error::IOHandlerError</code> - IO 异常</p>
</li><li>
<p><code>Error::OSHandlerError</code> - 系统调用异常</p>
</li><li>
<p><code>Error::UnexpectedRedirectHandlerError</code> - 非预期的重定向错误</p>
</li><li>
<p><code>Error::UserCancelledHandlerError</code> - 用户取消异常</p>
</li><li>
<p><code>Error::JSONHandlerError</code> - JSON 错误</p>
</li><li>
<p><code>Error::ResponseStatusCodeHandlerError</code> - 响应状态码错误</p>
</li><li>
<p><code>Error::CurlHandlerError</code> - Curl 错误</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>request</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>回调函数</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>request</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/Request.html" title="QiniuNg::HTTP::Request (class)">HTTP::Request</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HTTP 请求</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


521
522
523
524
525</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 521</span>

<span class='kw'>def</span> <span class='id identifier rubyid_append_http_request_before_action_handler'>append_http_request_before_action_handler</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_handler'>handler</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_idx'>idx</span> <span class='op'>=</span> <span class='const'>CallbackData</span><span class='period'>.</span><span class='id identifier rubyid_put'>put</span><span class='lparen'>(</span><span class='id identifier rubyid_handler'>handler</span><span class='rparen'>)</span>
  <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_append_http_request_before_action_handler'>append_http_request_before_action_handler</span><span class='lparen'>(</span><span class='const'>HTTPRequestBeforeActionHandler</span><span class='comma'>,</span> <span class='id identifier rubyid_idx'>idx</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="batch_max_operation_size-instance_method">
  
    #<strong>batch_max_operation_size</strong>(size)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置最大批量操作数</p>

<p>默认为 1000</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>size</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>最大批量操作数</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build!-instance_method">
  
    #<strong>build!</strong>  &#x21d2; <tt><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>生成客户端配置</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回新建的客户端配置实例</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


344
345
346
347
348</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 344</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build!'>build!</span>
  <span class='const'><span class='object_link'><a href="../Config.html" title="QiniuNg::Config (class)">Config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Config.html#initialize-instance_method" title="QiniuNg::Config#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='label'>builder:</span> <span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@builder</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:new_default</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_new_domains_manager-instance_method">
  
    #<strong>create_new_domains_manager</strong>(persistent_file = nil)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>创建一个新的域名管理器</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>persistent_file</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>新的域名管理器的持久化路径，如果传入 nil 则表示禁止持久化</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


436
437
438
439
440
441</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 436</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_new_domains_manager'>create_new_domains_manager</span><span class='lparen'>(</span><span class='id identifier rubyid_persistent_file'>persistent_file</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error.html" title="QiniuNg::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_ffi_function'>wrap_ffi_function</span> <span class='kw'>do</span>
    <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_create_new_domains_manager'>create_new_domains_manager</span><span class='lparen'>(</span><span class='id identifier rubyid_persistent_file'>persistent_file</span><span class='op'>&amp;.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="disable_uplog-instance_method">
  
    #<strong>disable_uplog</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>禁用上传日志记录仪，默认为启用</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 359</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="domains_manager_auto_persistent_interval-instance_method">
  
    #<strong>domains_manager_auto_persistent_interval</strong>(interval)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置域名管理器的自动持久化间隔时间</p>

<p>当自动持久化被启用，且存在持久化路径时，域名管理器将定期自动保存自身状态</p>

<p>默认间隔时间为三十分钟</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>interval</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>自动持久化间隔时间</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="domains_manager_disable_auto_persistent-instance_method">
  
    #<strong>domains_manager_disable_auto_persistent</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>禁止域名管理器自动持久化，默认为启用</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 359</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="domains_manager_disable_url_resolution-instance_method">
  
    #<strong>domains_manager_disable_url_resolution</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>禁止域名管理器 URL 域名预解析，默认为启用</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 359</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="domains_manager_enable_url_resolution-instance_method">
  
    #<strong>domains_manager_enable_url_resolution</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>启用域名管理器 URL 域名预解析，默认为启用</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 359</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="domains_manager_persistent_file_path-instance_method">
  
    #<strong>domains_manager_persistent_file_path</strong>(persistent_file_path)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置域名管理器的持久化路径</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>persistent_file_path</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>持久化路径，如果传入 nil 则表示禁止持久化</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 669</span>

<span class='qsymbols_beg'>%i[</span><span class='tstring_content'>api_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rs_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rsf_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uc_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_host</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_persistent_file_path</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_pre_resolve_url</span><span class='words_sep'>
   </span><span class='tstring_content'>upload_recorder_root_directory</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_file_path</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error.html" title="QiniuNg::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_ffi_function'>wrap_ffi_function</span> <span class='kw'>do</span>
      <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="domains_manager_pre_resolve_url-instance_method">
  
    #<strong>domains_manager_pre_resolve_url</strong>(pre_resolve_url)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>添加域名预解析 URL</p>

<p>当客户端配置生成器生成前，可以指定多个预解析 URL 域名。 而生成时，将以异步的方式预解析 URL 域名，并将结果缓存在域名管理器内</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pre_resolve_url</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>域名预解析 URL</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 669</span>

<span class='qsymbols_beg'>%i[</span><span class='tstring_content'>api_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rs_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rsf_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uc_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_host</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_persistent_file_path</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_pre_resolve_url</span><span class='words_sep'>
   </span><span class='tstring_content'>upload_recorder_root_directory</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_file_path</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error.html" title="QiniuNg::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_ffi_function'>wrap_ffi_function</span> <span class='kw'>do</span>
      <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="domains_manager_resolutions_cache_lifetime-instance_method">
  
    #<strong>domains_manager_resolutions_cache_lifetime</strong>(lifetime)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置域名管理器的域名解析缓存生命周期</p>

<p>默认缓存一小时</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>lifetime</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>域名解析缓存生命周期</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="domains_manager_url_frozen_duration-instance_method">
  
    #<strong>domains_manager_url_frozen_duration</strong>(url_frozen_duration)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置域名管理器的 URL 冻结时长</p>

<p>当 SDK 发送 HTTP 请求时，如果发现网络或服务异常，靠重试无法解决的，则冻结所访问的服务器 URL。 被冻结的服务器在冻结期间将无法被访问</p>

<p>默认冻结十分钟</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>url_frozen_duration</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>URL 冻结时长</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="domains_manager_url_resolve_retries-instance_method">
  
    #<strong>domains_manager_url_resolve_retries</strong>(retries)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置域名管理器的 URL 域名预解析重试次数</p>

<p>默认为 10 次</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>retries</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>重试次数</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="domains_manager_url_resolve_retry_delay-instance_method">
  
    #<strong>domains_manager_url_resolve_retry_delay</strong>(delay)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置域名管理器的 URL 域名预解析重试前等待时间</p>

<p>当 SDK 预解析域名时发送错误时，SDK 将等待一段时间并且重试。 每次实际等待时长为该项值的 50% - 100% 之间的随机时长。</p>

<p>默认为 1 秒，也就是说每次等待 500 毫秒至 1 秒间不等</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>delay</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>等待时间</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="enable_uplog-instance_method">
  
    #<strong>enable_uplog</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>启用上传日志记录仪，默认为启用</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 359</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="http_connect_timeout-instance_method">
  
    #<strong>http_connect_timeout</strong>(timeout)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 HTTP 请求连接超时时长</p>

<p>默认为 5 秒</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超时时长</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="http_low_transfer_speed-instance_method">
  
    #<strong>http_low_transfer_speed</strong>(speed)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 HTTP 最低传输速度</p>

<p>与 http_low_transfer_speed_timeout 配合使用。 当 HTTP 传输速度低于最低传输速度
http_low_transfer_speed 并维持超过 http_low_transfer_speed_timeout 的时长，则出错。 SDK
会自动重试，或出错退出</p>

<p>默认为 1024 字节/秒</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>speed</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>最低传输速度，单位为字节/秒</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="http_low_transfer_speed_timeout-instance_method">
  
    #<strong>http_low_transfer_speed_timeout</strong>(timeout)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 HTTP 最低传输速度维持时长</p>

<p>与 http_low_transfer_speed 配合使用。 当 HTTP 传输速度低于最低传输速度 http_low_transfer_speed
并维持超过 http_low_transfer_speed_timeout 的时长，则出错。 SDK 会自动重试，或出错退出</p>

<p>默认为 30 秒</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>最低传输速度维持时长</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="http_request_handler-instance_method">
  
    #<strong>http_request_handler</strong> {|request, response| ... } &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 HTTP 请求处理函数</p>

<p>如果在处理函数中发生错误，您可以抛出对应的异常。但只有以下几种异常会被 SDK 处理:</p>
<ul><li>
<p><code>Error::IOHandlerError</code> - IO 异常</p>
</li><li>
<p><code>Error::OSHandlerError</code> - 系统调用异常</p>
</li><li>
<p><code>Error::UnexpectedRedirectHandlerError</code> - 非预期的重定向错误</p>
</li><li>
<p><code>Error::UserCancelledHandlerError</code> - 用户取消异常</p>
</li><li>
<p><code>Error::JSONHandlerError</code> - JSON 错误</p>
</li><li>
<p><code>Error::ResponseStatusCodeHandlerError</code> - 响应状态码错误</p>
</li><li>
<p><code>Error::CurlHandlerError</code> - Curl 错误</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>request</tt>, <tt>response</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>处理函数</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>request</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/Request.html" title="QiniuNg::HTTP::Request (class)">HTTP::Request</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HTTP 请求</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>response</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/Response.html" title="QiniuNg::HTTP::Response (class)">HTTP::Response</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HTTP 响应</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


610
611
612
613
614</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 610</span>

<span class='kw'>def</span> <span class='id identifier rubyid_http_request_handler'>http_request_handler</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_handler'>handler</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_idx'>idx</span> <span class='op'>=</span> <span class='const'>CallbackData</span><span class='period'>.</span><span class='id identifier rubyid_put'>put</span><span class='lparen'>(</span><span class='id identifier rubyid_handler'>handler</span><span class='rparen'>)</span>
  <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_set_http_call_handler'>set_http_call_handler</span><span class='lparen'>(</span><span class='const'>HTTPRequestAfterActionHandler</span><span class='comma'>,</span> <span class='id identifier rubyid_idx'>idx</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="http_request_retries-instance_method">
  
    #<strong>http_request_retries</strong>(retries)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 HTTP 请求重试次数</p>

<p>当 SDK 发送 HTTP 请求时发生错误，且该错误可以通过重试来解决时，SDK 将重试的次数</p>

<p>默认为 3 次</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>retries</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>重试次数</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="http_request_retry_delay-instance_method">
  
    #<strong>http_request_retry_delay</strong>(delay)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 HTTP 请求重试前等待时间</p>

<p>当 SDK 发送 HTTP 请求时发生错误，且该错误可以通过重试来解决时，SDK 将等待一段时间并且重试 每次实际等待时长为该项值的 50% -
100% 之间的随机时长</p>

<p>默认为 1 秒，也就是说每次等待 500 毫秒至 1 秒间不等</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>delay</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>等待时间</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="http_request_timeout-instance_method">
  
    #<strong>http_request_timeout</strong>(timeout)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 HTTP 请求超时时长</p>

<p>默认为 5 分钟</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超时时长</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_domains_manager_from_file-instance_method">
  
    #<strong>load_domains_manager_from_file</strong>(persistent_file)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>从指定路径加载域名管理器</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>persistent_file</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>持久化路径</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


446
447
448
449
450
451</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 446</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_domains_manager_from_file'>load_domains_manager_from_file</span><span class='lparen'>(</span><span class='id identifier rubyid_persistent_file'>persistent_file</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error.html" title="QiniuNg::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_ffi_function'>wrap_ffi_function</span> <span class='kw'>do</span>
    <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_create_new_domains_manager'>create_new_domains_manager</span><span class='lparen'>(</span><span class='id identifier rubyid_persistent_file'>persistent_file</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prepend_http_request_after_action_handler-instance_method">
  
    #<strong>prepend_http_request_after_action_handler</strong> {|request, response| ... } &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>新增 HTTP 请求响应后回调函数</p>

<p>您可以利用该特性输出 HTTP 日志或对 HTTP 响应内容进行修改。 但注意，您必须确保不破坏响应中必要的内容，否则 SDK 可能无法处理该响应。</p>

<p>如果在回调中发生错误，您可以抛出对应的异常。但只有以下几种异常会被 SDK 处理:</p>
<ul><li>
<p><code>Error::IOHandlerError</code> - IO 异常</p>
</li><li>
<p><code>Error::OSHandlerError</code> - 系统调用异常</p>
</li><li>
<p><code>Error::UnexpectedRedirectHandlerError</code> - 非预期的重定向错误</p>
</li><li>
<p><code>Error::UserCancelledHandlerError</code> - 用户取消异常</p>
</li><li>
<p><code>Error::JSONHandlerError</code> - JSON 错误</p>
</li><li>
<p><code>Error::ResponseStatusCodeHandlerError</code> - 响应状态码错误</p>
</li><li>
<p><code>Error::CurlHandlerError</code> - Curl 错误</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>request</tt>, <tt>response</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>回调函数</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>request</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/Request.html" title="QiniuNg::HTTP::Request (class)">HTTP::Request</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HTTP 请求</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>response</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/Response.html" title="QiniuNg::HTTP::Response (class)">HTTP::Response</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HTTP 响应</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


552
553
554
555
556</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 552</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prepend_http_request_after_action_handler'>prepend_http_request_after_action_handler</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_handler'>handler</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_idx'>idx</span> <span class='op'>=</span> <span class='const'>CallbackData</span><span class='period'>.</span><span class='id identifier rubyid_put'>put</span><span class='lparen'>(</span><span class='id identifier rubyid_handler'>handler</span><span class='rparen'>)</span>
  <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_prepend_http_request_after_action_handler'>prepend_http_request_after_action_handler</span><span class='lparen'>(</span><span class='const'>HTTPRequestAfterActionHandler</span><span class='comma'>,</span> <span class='id identifier rubyid_idx'>idx</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prepend_http_request_before_action_handler-instance_method">
  
    #<strong>prepend_http_request_before_action_handler</strong> {|request| ... } &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>新增 HTTP 请求前回调函数</p>

<p>您可以利用该特性输出 HTTP 日志或对 HTTP 请求内容进行修改。 但注意，您必须确保不破坏请求中必要的内容，否则七牛服务器可能无法处理该请求。</p>

<p>如果在回调中发生错误，您可以抛出对应的异常。但只有以下几种异常会被 SDK 处理:</p>
<ul><li>
<p><code>Error::IOHandlerError</code> - IO 异常</p>
</li><li>
<p><code>Error::OSHandlerError</code> - 系统调用异常</p>
</li><li>
<p><code>Error::UnexpectedRedirectHandlerError</code> - 非预期的重定向错误</p>
</li><li>
<p><code>Error::UserCancelledHandlerError</code> - 用户取消异常</p>
</li><li>
<p><code>Error::JSONHandlerError</code> - JSON 错误</p>
</li><li>
<p><code>Error::ResponseStatusCodeHandlerError</code> - 响应状态码错误</p>
</li><li>
<p><code>Error::CurlHandlerError</code> - Curl 错误</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>request</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>回调函数</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>request</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../HTTP/Request.html" title="QiniuNg::HTTP::Request (class)">HTTP::Request</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>HTTP 请求</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


582
583
584
585
586</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 582</span>

<span class='kw'>def</span> <span class='id identifier rubyid_prepend_http_request_before_action_handler'>prepend_http_request_before_action_handler</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_handler'>handler</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_idx'>idx</span> <span class='op'>=</span> <span class='const'>CallbackData</span><span class='period'>.</span><span class='id identifier rubyid_put'>put</span><span class='lparen'>(</span><span class='id identifier rubyid_handler'>handler</span><span class='rparen'>)</span>
  <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_prepend_http_request_before_action_handler'>prepend_http_request_before_action_handler</span><span class='lparen'>(</span><span class='const'>HTTPRequestBeforeActionHandler</span><span class='comma'>,</span> <span class='id identifier rubyid_idx'>idx</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rs_host-instance_method">
  
    #<strong>rs_host</strong>(rs_host)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 RS 服务器地址</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>rs_host</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>RS 服务器地址（仅需要指定主机地址和端口，无需包含协议）</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 669</span>

<span class='qsymbols_beg'>%i[</span><span class='tstring_content'>api_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rs_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rsf_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uc_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_host</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_persistent_file_path</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_pre_resolve_url</span><span class='words_sep'>
   </span><span class='tstring_content'>upload_recorder_root_directory</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_file_path</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error.html" title="QiniuNg::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_ffi_function'>wrap_ffi_function</span> <span class='kw'>do</span>
      <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rsf_host-instance_method">
  
    #<strong>rsf_host</strong>(rsf_host)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 RSF 服务器地址</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>rsf_host</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>RSF 服务器地址（仅需要指定主机地址和端口，无需包含协议）</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 669</span>

<span class='qsymbols_beg'>%i[</span><span class='tstring_content'>api_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rs_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rsf_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uc_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_host</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_persistent_file_path</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_pre_resolve_url</span><span class='words_sep'>
   </span><span class='tstring_content'>upload_recorder_root_directory</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_file_path</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error.html" title="QiniuNg::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_ffi_function'>wrap_ffi_function</span> <span class='kw'>do</span>
      <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_appended_user_agent-instance_method">
  
    #<strong>set_appended_user_agent</strong>(user_agent)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置追加用户代理</p>

<p>SDK 本身会包含预定的用户代理字符串，您不能修改该字符串，但可以向该字符串追加更多内容</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user_agent</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>追加的用户代理</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


459
460
461
462
463
464</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 459</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_appended_user_agent'>set_appended_user_agent</span><span class='lparen'>(</span><span class='id identifier rubyid_user_agent'>user_agent</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_user_agent'>user_agent</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_user_agent'>user_agent</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user_agent'>user_agent</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_user_agent'>user_agent</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>DEFAULT_APPENDED_USER_AGENT</span> <span class='op'>+</span> <span class='id identifier rubyid_user_agent'>user_agent</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_set_appended_user_agent'>set_appended_user_agent</span><span class='lparen'>(</span><span class='id identifier rubyid_user_agent'>user_agent</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tcp_keepalive_idle_timeout-instance_method">
  
    #<strong>tcp_keepalive_idle_timeout</strong>(timeout)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 TCP KeepAlive 空闲时长</p>

<p>默认为 5 分钟</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>空闲时长</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tcp_keepalive_probe_interval-instance_method">
  
    #<strong>tcp_keepalive_probe_interval</strong>(interval)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 TCP KeepAlive 探测包的发送间隔</p>

<p>默认为 5 秒</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>interval</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>发送间隔</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uc_host-instance_method">
  
    #<strong>uc_host</strong>(uc_host)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 UC 服务器地址</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uc_host</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>UC 服务器地址（仅需要指定主机地址和端口，无需包含协议）</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 669</span>

<span class='qsymbols_beg'>%i[</span><span class='tstring_content'>api_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rs_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rsf_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uc_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_host</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_persistent_file_path</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_pre_resolve_url</span><span class='words_sep'>
   </span><span class='tstring_content'>upload_recorder_root_directory</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_file_path</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error.html" title="QiniuNg::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_ffi_function'>wrap_ffi_function</span> <span class='kw'>do</span>
      <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload_block_size-instance_method">
  
    #<strong>upload_block_size</strong>(size)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置上传分块尺寸</p>

<p>默认为 4 MB，尺寸越小越适合弱网环境，但必须是 4 MB 的倍数</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>size</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>上传分块尺寸，单位为字节</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload_recorder_always_flush_records-instance_method">
  
    #<strong>upload_recorder_always_flush_records</strong>(always_flush_records)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置进度记录文件始终刷新</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>always_flush_records</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>进度记录文件是否始终刷新</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 387</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload_recorder_root_directory-instance_method">
  
    #<strong>upload_recorder_root_directory</strong>(root_directory)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置上传进度记录仪文件根目录</p>

<p>默认的文件系统记录仪目录规则如下：  1. 尝试在操作系统特定的缓存目录下创建 qiniu_sdk/records 目录。  2. 如果成功，则使用
qiniu_sdk/records 目录。  3. 如果失败，则直接使用临时目录。</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>root_directory</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>文件根目录</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 669</span>

<span class='qsymbols_beg'>%i[</span><span class='tstring_content'>api_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rs_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rsf_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uc_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_host</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_persistent_file_path</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_pre_resolve_url</span><span class='words_sep'>
   </span><span class='tstring_content'>upload_recorder_root_directory</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_file_path</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error.html" title="QiniuNg::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_ffi_function'>wrap_ffi_function</span> <span class='kw'>do</span>
      <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload_recorder_upload_block_lifetime-instance_method">
  
    #<strong>upload_recorder_upload_block_lifetime</strong>(lifetime)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置文件分块有效期</p>

<p>对于超过有效期的分块，SDK 将重新上传，确保所有分块在创建文件时均有效</p>

<p>默认为 7 天，这是七牛公有云默认的配置。对于私有云的情况，需要参照私有云的配置来设置</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>lifetime</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>文件分块有效期</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload_threshold-instance_method">
  
    #<strong>upload_threshold</strong>(threshold)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置分片上传策略阙值</p>

<p>如果上传文件尺寸大于该值，将自动使用分片上传，否则，使用表单上传</p>

<p>默认为 4 MB</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>threshold</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>分片上传策略阙值，单位为字节</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload_token_lifetime-instance_method">
  
    #<strong>upload_token_lifetime</strong>(lifetime)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置上传凭证有效期</p>

<p>默认为 1 小时</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>lifetime</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Utils/Duration.html" title="QiniuNg::Utils::Duration (class)">Utils::Duration</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>上传凭证有效期</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uplog_file_lock_policy-instance_method">
  
    #<strong>uplog_file_lock_policy</strong>(lock_policy)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='uplog_file_lock_policy=-instance_method'>uplog_file_lock_policy=</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置文件锁策略</p>

<p>为了防止上传文件的过程中，上传日志文件被多个进程同时修改引发竞争，因此需要在操作日志文件时使用文件锁保护。 默认策略
:lock_shared_duration_appending_and_lock_exclusive_duration_uploading
为在追加日志时为日志文件加共享锁，而上传时使用排他锁，尽可能做到安全和性能之间的平衡。</p>

<p>但在有些场景下中，并发追加日志文件同样会引发竞争，此时需要改用 :always_lock_exclusive 策略。
此外，如果确定当前操作系统内不会有多个进程同时上传文件，或不同进程不会使用相同路径的日志时， 也可以使用 :none 策略，减少文件锁的性能影响。</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>lock_policy</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>上传日志文件锁策略</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


417
418
419
420
421
422
423
424
425
426
427
428
429
430</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 417</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uplog_file_lock_policy'>uplog_file_lock_policy</span><span class='lparen'>(</span><span class='id identifier rubyid_lock_policy'>lock_policy</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_lock_policy'>lock_policy</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_lock_policy'>lock_policy</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
                <span class='kw'>when</span> <span class='symbol'>:lock_shared_duration_appending_and_lock_exclusive_duration_uploading</span>
                  <span class='symbol'>:qiniu_ng_lock_policy_lock_shared_duration_appending_and_lock_exclusive_duration_uploading</span>
                <span class='kw'>when</span> <span class='symbol'>:always_lock_exclusive</span>
                  <span class='symbol'>:qiniu_ng_lock_policy_always_lock_exclusive</span>
                <span class='kw'>when</span> <span class='symbol'>:none</span>
                  <span class='symbol'>:qiniu_ng_lock_policy_none</span>
                <span class='kw'>else</span>
                  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid lock policy: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lock_policy'>lock_policy</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
                <span class='kw'>end</span>
  <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_uplog_file_lock_policy'>uplog_file_lock_policy</span><span class='lparen'>(</span><span class='id identifier rubyid_lock_policy'>lock_policy</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uplog_file_max_size-instance_method">
  
    #<strong>uplog_file_max_size</strong>(max_size)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置上传日志文件的最大尺寸</p>

<p>当上传日志文件尺寸大于指定尺寸时，将不会再记录任何数据到日志内。 防止在上传发生困难时日志文件无限制膨胀。</p>

<p>该值必须大于 upload_threshold，默认为 4 MB</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>max_size</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>上传日志文件的最大尺寸，单位为字节</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uplog_file_path-instance_method">
  
    #<strong>uplog_file_path</strong>(path)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置上传日志文件路径</p>

<p>默认的上传日志文件路径规则如下：  1. 尝试在操作系统特定的缓存目录下创建 qiniu_sdk 目录。  2. 如果成功，则使用 qiniu_sdk
目录下的 upload.log。  3. 如果失败，则直接使用临时目录下的 upload.log。</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>上传日志文件路径</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 669</span>

<span class='qsymbols_beg'>%i[</span><span class='tstring_content'>api_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rs_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rsf_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uc_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_host</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_persistent_file_path</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_pre_resolve_url</span><span class='words_sep'>
   </span><span class='tstring_content'>upload_recorder_root_directory</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_file_path</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error.html" title="QiniuNg::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_ffi_function'>wrap_ffi_function</span> <span class='kw'>do</span>
      <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uplog_file_upload_threshold-instance_method">
  
    #<strong>uplog_file_upload_threshold</strong>(threshold)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置上传日志文件的上传阙值</p>

<p>当且仅当上传日志文件尺寸大于阙值时才会上传日志</p>

<p>默认为 4 KB</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>threshold</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>上传阙值，单位为字节</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RangeError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>超过最大范围</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 687</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uplog_host-instance_method">
  
    #<strong>uplog_host</strong>(uplog_host)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>设置 UpLog 服务器地址</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uplog_host</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>UpLog 服务器地址（仅需要指定主机地址和端口，无需包含协议）</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 669</span>

<span class='qsymbols_beg'>%i[</span><span class='tstring_content'>api_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rs_host</span><span class='words_sep'>
   </span><span class='tstring_content'>rsf_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uc_host</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_host</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_persistent_file_path</span><span class='words_sep'>
   </span><span class='tstring_content'>domains_manager_pre_resolve_url</span><span class='words_sep'>
   </span><span class='tstring_content'>upload_recorder_root_directory</span><span class='words_sep'>
   </span><span class='tstring_content'>uplog_file_path</span><span class='tstring_end'>]</span></span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_method'>method</span><span class='op'>|</span>
  <span class='id identifier rubyid_define_method'>define_method</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_arg'>arg</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="../../QiniuNg.html" title="QiniuNg (module)">QiniuNg</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Error.html" title="QiniuNg::Error (class)">Error</a></span></span><span class='period'>.</span><span class='id identifier rubyid_wrap_ffi_function'>wrap_ffi_function</span> <span class='kw'>do</span>
      <span class='ivar'>@builder</span><span class='period'>.</span><span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='id identifier rubyid_arg'>arg</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:&quot;#{</span><span class='id identifier rubyid_method'>method</span><span class='embexpr_end'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_method'>method</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="use_https-instance_method">
  
    #<strong>use_https</strong>(use_https)  &#x21d2; <tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>是否使用 HTTPS 协议</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>use_https</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>是否使用 HTTPS 协议，默认为使用 HTTPS 协议</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="QiniuNg::Config::Builder (class)">Builder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>返回自身，可以形成链式调用</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/qiniu_ng/config.rb', line 387</span>

</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Mar 27 06:27:59 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.24 (ruby-2.5.1).
</div>

    </div>
  </body>
</html>